/******/ (() => { // webpackBootstrap
/*!**************************!*
  !*** ./contentscript.js ***!
  \**************************/
let options;
chrome.storage.sync.get('options', function (data) {
  options = data.options;
});
$(document).on('mousestop', function (e) {
  console.log('mousestop');
});
$(document).click(function (e) {
  withOptionsSatisfied(e, function () {
    if (options.translate_by != 'click') if ($(e.target).closest('a').length > 0) // closed parent
      return;
    processEvent(e);
  });
  return true;
});

function withOptionsSatisfied(e, do_stuff) {
  // pre-hook
  do_stuff();
} //translate


function processEvent(e) {
  const selection = window.getSelection();
  const hit_elem = document.elementFromPoint(e.clientX, e.clientY);

  if (!hit_elem) {
    return;
  }

  let word = '';

  if (selection.toString()) {
    if (options.selection_key_only) {
      console.log('Skip because "selection_key_only"');
      return;
    }

    let sel_container = selection.getRangeAt(0).commonAncestorContainer;

    while (sel_container.nodeType != Node.ELEMENT_NODE) {
      sel_container = sel_container.parentNode;
    }

    if (($(hit_elem).is(sel_container) || $.contains(sel_container, hit_elem)) && selection.containsNode(hit_elem, true)) {
      word = selection.toString();
    }

    if (word != '') {
      // chrome.runtime.sendMessage({handler: 'translate', word}, function(response) {
      //   console.log('response: ', response)        
      // })
      console.log('word');
      chrome.storage.sync.set({
        word
      }, function () {
        console.log(`word: ${word}`);
      });
    }
  }
}

function serialize(data) {
  const result = {};

  if (!data) {
    return;
  }

  if (data.type === '관련 검색어') {
    result['recommands'] = data.content.map(one => one.title);
  }

  if (data.type === '찾은 단어') {
    result['find'] = data.content;
  }

  return data;
}

chrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {
  switch (request.handler) {
    case 'find':
      result.innerHTML = sender.tab.id;
      return true;

    case 'recommand':
      result.innerHTML = sender.tab.id;
      return true;

    default:
      result.innerHTML = sender.tab.id;
      sendResponse({});
  }

  return true;
});
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWxsb19leHRlbnNpb25zLy4vY29udGVudHNjcmlwdC5qcyJdLCJuYW1lcyI6WyJvcHRpb25zIiwiY2hyb21lIiwic3RvcmFnZSIsInN5bmMiLCJnZXQiLCJkYXRhIiwiJCIsImRvY3VtZW50Iiwib24iLCJlIiwiY29uc29sZSIsImxvZyIsImNsaWNrIiwid2l0aE9wdGlvbnNTYXRpc2ZpZWQiLCJ0cmFuc2xhdGVfYnkiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwicHJvY2Vzc0V2ZW50IiwiZG9fc3R1ZmYiLCJzZWxlY3Rpb24iLCJ3aW5kb3ciLCJnZXRTZWxlY3Rpb24iLCJoaXRfZWxlbSIsImVsZW1lbnRGcm9tUG9pbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsIndvcmQiLCJ0b1N0cmluZyIsInNlbGVjdGlvbl9rZXlfb25seSIsInNlbF9jb250YWluZXIiLCJnZXRSYW5nZUF0IiwiY29tbW9uQW5jZXN0b3JDb250YWluZXIiLCJub2RlVHlwZSIsIk5vZGUiLCJFTEVNRU5UX05PREUiLCJwYXJlbnROb2RlIiwiaXMiLCJjb250YWlucyIsImNvbnRhaW5zTm9kZSIsInNldCIsInNlcmlhbGl6ZSIsInJlc3VsdCIsInR5cGUiLCJjb250ZW50IiwibWFwIiwib25lIiwidGl0bGUiLCJydW50aW1lIiwib25NZXNzYWdlIiwiYWRkTGlzdGVuZXIiLCJyZXF1ZXN0Iiwic2VuZGVyIiwic2VuZFJlc3BvbnNlIiwiaGFuZGxlciIsImlubmVySFRNTCIsInRhYiIsImlkIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBSUEsT0FBSjtBQUVBQyxNQUFNLENBQUNDLE9BQVAsQ0FBZUMsSUFBZixDQUFvQkMsR0FBcEIsQ0FBd0IsU0FBeEIsRUFBbUMsVUFBU0MsSUFBVCxFQUFlO0FBQ2hETCxTQUFPLEdBQUdLLElBQUksQ0FBQ0wsT0FBZjtBQUNELENBRkQ7QUFLQU0sQ0FBQyxDQUFDQyxRQUFELENBQUQsQ0FBWUMsRUFBWixDQUFlLFdBQWYs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QUVELFNBQU92QyxJQUFQO0FBQ0g7O0FBRURKLE1BQU0sQ0FBQytDLE9BQVAsQ0FBZUMsU0FBZixDQUF5QkMsV0FBekIsQ0FBcUMsVUFBU0MsT0FBVCxFQUFrQkMsTUFBbEIsRUFBMEJDLFlBQTFCLEVBQXdDO0FBRTNFLFVBQVFGLE9BQU8sQ0FBQ0csT0FBaEI7QUFDQSxTQUFLLE1BQUw7QUFDSVosWUFBTSxDQUFDYSxTQUFQLEdBQW1CSCxNQUFNLENBQUNJLEdBQVAsQ0FBV0MsRUFBOUI7QUFDQSxhQUFPLElBQVA7O0FBQ0osU0FBSyxXQUFMO0FBQ0lmLFlBQU0sQ0FBQ2EsU0FBUCxHQUFtQkgsTUFBTSxDQUFDSSxHQUFQLENBQVdDLEVBQTlCO0FBQ0EsYUFBTyxJQUFQOztBQUNKO0FBQ0lmLFlBQU0sQ0FBQ2EsU0FBUCxHQUFtQkgsTUFBTSxDQUFDSSxHQUFQLENBQVdDLEVBQTlCO0FBQ0FKLGtCQUFZLENBQUMsRUFBRCxDQUFaO0FBVEo7O0FBV0EsU0FBTyxJQUFQO0FBQ0QsQ0FkRCxFIiwiZmlsZSI6ImNvbnRlbnRzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgb3B0aW9uc1xuXG5jaHJvbWUuc3RvcmFnZS5zeW5jLmdldCgnb3B0aW9ucycsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgb3B0aW9ucyA9IGRhdGEub3B0aW9uc1xufSk7XG4gIFxuXG4kKGRvY3VtZW50KS5vbignbW91c2VzdG9wJywgZnVuY3Rpb24oZSkge1xuICAgICAgY29uc29sZS5sb2coJ21vdXNlc3RvcCcpXG4gIH1cbilcblxuJChkb2N1bWVudCkuY2xpY2soZnVuY3Rpb24oZSkge1xuICB3aXRoT3B0aW9uc1NhdGlzZmllZChlLCBmdW5jdGlvbigpIHtcbiAgICBpZiAob3B0aW9ucy50cmFuc2xhdGVfYnkgIT0gJ2NsaWNrJylcblxuICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJykubGVuZ3RoID4gMCkgLy8gY2xvc2VkIHBhcmVudFxuICAgICAgcmV0dXJuXG5cbiAgICBwcm9jZXNzRXZlbnQoZSlcbiAgfSlcbiAgcmV0dXJuIHRydWVcbn0pXG5cbmZ1bmN0aW9uIHdpdGhPcHRpb25zU2F0aXNmaWVkKGUsIGRvX3N0dWZmKSB7XG4gICAgLy8gcHJlLWhvb2tcbiAgICBkb19zdHVmZigpXG59XG5cblxuLy90cmFuc2xhdGVcblxuZnVuY3Rpb24gcHJvY2Vzc0V2ZW50KGUpIHtcblxuICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKClcbiAgY29uc3QgaGl0X2VsZW0gPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGUuY2xpZW50WCwgZS5jbGllbnRZKVxuICBpZiAoIWhpdF9lbGVtKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBsZXQgd29yZCA9ICcnXG4gIGlmIChzZWxlY3Rpb24udG9TdHJpbmcoKSkge1xuICAgIGlmIChvcHRpb25zLnNlbGVjdGlvbl9rZXlfb25seSkge1xuICAgICAgY29uc29sZS5sb2coJ1NraXAgYmVjYXVzZSBcInNlbGVjdGlvbl9rZXlfb25seVwiJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCBzZWxfY29udGFpbmVyID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCkuY29tbW9uQW5jZXN0b3JDb250YWluZXJcbiAgICBcbiAgICB3aGlsZSAoc2VsX2NvbnRhaW5lci5ub2RlVHlwZSAhPSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgc2VsX2NvbnRhaW5lciA9IHNlbF9jb250YWluZXIucGFyZW50Tm9kZVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgICggJChoaXRfZWxlbSkuaXMoc2VsX2NvbnRhaW5lcikgfHwgJC5jb250YWlucyhzZWxfY29udGFpbmVyLCBoaXRfZWxlbSkgKVxuICAgICAgICAmJiBzZWxlY3Rpb24uY29udGFpbnNOb2RlKGhpdF9lbGVtLCB0cnVlKVxuICAgICkge1xuICAgICAgd29yZCA9IHNlbGVjdGlvbi50b1N0cmluZygpXG4gICAgfVxuICBcbiAgICBpZiAod29yZCAhPSAnJykge1xuICAgICAgLy8gY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe2hhbmRsZXI6ICd0cmFuc2xhdGUnLCB3b3JkfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIC8vICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlOiAnLCByZXNwb25zZSkgICAgICAgIFxuICAgICAgLy8gfSlcbiAgICAgIGNvbnNvbGUubG9nKCd3b3JkJylcbiAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHt3b3JkfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGB3b3JkOiAke3dvcmR9YCk7XG5cbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShkYXRhKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge31cbiAgICBpZighZGF0YSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYoZGF0YS50eXBlID09PSAn6rSA66CoIOqygOyDieyWtCcpIHtcbiAgICAgIHJlc3VsdFsncmVjb21tYW5kcyddID0gZGF0YS5jb250ZW50Lm1hcCgob25lKT0+IG9uZS50aXRsZSlcbiAgICB9XG5cbiAgICBpZihkYXRhLnR5cGUgPT09ICfssL7snYAg64uo7Ja0Jykge1xuICAgICAgcmVzdWx0WydmaW5kJ10gPSBkYXRhLmNvbnRlbnRcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxufVxuXG5jaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoZnVuY3Rpb24ocmVxdWVzdCwgc2VuZGVyLCBzZW5kUmVzcG9uc2UpIHtcbiAgICBcbiAgc3dpdGNoIChyZXF1ZXN0LmhhbmRsZXIpIHtcbiAgY2FzZSAnZmluZCc6XG4gICAgICByZXN1bHQuaW5uZXJIVE1MID0gc2VuZGVyLnRhYi5pZFxuICAgICAgcmV0dXJuIHRydWVcbiAgY2FzZSAncmVjb21tYW5kJzpcbiAgICAgIHJlc3VsdC5pbm5lckhUTUwgPSBzZW5kZXIudGFiLmlkXG4gICAgICByZXR1cm4gdHJ1ZVxuICBkZWZhdWx0OlxuICAgICAgcmVzdWx0LmlubmVySFRNTCA9IHNlbmRlci50YWIuaWRcbiAgICAgIHNlbmRSZXNwb25zZSh7fSlcbiAgfVxuICByZXR1cm4gdHJ1ZVxufSlcblxuIl0sInNvdXJjZVJvb3QiOiIifQ==