/******/ (() => { // webpackBootstrap
/*!**************************!*
  !*** ./contentscript.js ***!
  \**************************/
let options;
chrome.storage.sync.get('options', function (data) {
  options = data.options;
});
$(document).click(function (e) {
  withOptionsSatisfied(e, function () {
    if (options.translate_by != 'click') if ($(e.target).closest('a').length > 0) // closed parent
      return;
    processEvent(e);
  });
  return true;
});

function withOptionsSatisfied(e, do_stuff) {
  // pre-hook
  do_stuff();
} //translate


function processEvent(e) {
  const selection = window.getSelection();
  const hit_elem = document.elementFromPoint(e.clientX, e.clientY);

  if (!hit_elem) {
    return;
  }

  let word = '';

  if (selection.toString()) {
    if (options.selection_key_only) {
      return;
    }

    let sel_container = selection.getRangeAt(0).commonAncestorContainer;

    while (sel_container.nodeType != Node.ELEMENT_NODE) {
      sel_container = sel_container.parentNode;
    }

    if (($(hit_elem).is(sel_container) || $.contains(sel_container, hit_elem)) && selection.containsNode(hit_elem, true)) {
      word = selection.toString();
    }

    if (word != '') {
      chrome.storage.sync.set({
        word
      });
    }
  }
}

function serialize(data) {
  const result = {};

  if (!data) {
    return;
  }

  if (data.type === '관련 검색어') {
    result['recommands'] = data.content.map(one => one.title);
  }

  if (data.type === '찾은 단어') {
    result['find'] = data.content;
  }

  return data;
}

chrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {
  switch (request.handler) {
    case 'find':
      result.innerHTML = sender.tab.id;
      return true;

    case 'recommand':
      result.innerHTML = sender.tab.id;
      return true;

    default:
      result.innerHTML = sender.tab.id;
      sendResponse({});
  }

  return true;
});
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWxsb19leHRlbnNpb25zLy4vY29udGVudHNjcmlwdC5qcyJdLCJuYW1lcyI6WyJvcHRpb25zIiwiY2hyb21lIiwic3RvcmFnZSIsInN5bmMiLCJnZXQiLCJkYXRhIiwiJCIsImRvY3VtZW50IiwiY2xpY2siLCJlIiwid2l0aE9wdGlvbnNTYXRpc2ZpZWQiLCJ0cmFuc2xhdGVfYnkiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwicHJvY2Vzc0V2ZW50IiwiZG9fc3R1ZmYiLCJzZWxlY3Rpb24iLCJ3aW5kb3ciLCJnZXRTZWxlY3Rpb24iLCJoaXRfZWxlbSIsImVsZW1lbnRGcm9tUG9pbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsIndvcmQiLCJ0b1N0cmluZyIsInNlbGVjdGlvbl9rZXlfb25seSIsInNlbF9jb250YWluZXIiLCJnZXRSYW5nZUF0IiwiY29tbW9uQW5jZXN0b3JDb250YWluZXIiLCJub2RlVHlwZSIsIk5vZGUiLCJFTEVNRU5UX05PREUiLCJwYXJlbnROb2RlIiwiaXMiLCJjb250YWlucyIsImNvbnRhaW5zTm9kZSIsInNldCIsInNlcmlhbGl6ZSIsInJlc3VsdCIsInR5cGUiLCJjb250ZW50IiwibWFwIiwib25lIiwidGl0bGUiLCJydW50aW1lIiwib25NZXNzYWdlIiwiYWRkTGlzdGVuZXIiLCJyZXF1ZXN0Iiwic2VuZGVyIiwic2VuZFJlc3BvbnNlIiwiaGFuZGxlciIsImlubmVySFRNTCIsInRhYiIsImlkIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBSUEsT0FBSjtBQUVBQyxNQUFNLENBQUNDLE9BQVAsQ0FBZUMsSUFBZixDQUFvQkMsR0FBcEIsQ0FBd0IsU0FBeEIsRUFBbUMsVUFBU0MsSUFBVCxFQUFlO0FBQ2hETCxTQUFPLEdBQUdLLElBQUksQ0FBQ0wsT0FBZjtBQUNELENBRkQ7QUFLQU0sQ0FBQyxDQUFDQyxRQUFELENBQUQsQ0FBWUMsS0FBWixDQUFrQixVQUFTQyxDQUFULEVBQVk7QUFDNUJDLHNC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R0FBUCxDQUFXQyxFQUE5QjtBQUNBLGFBQU8sSUFBUDs7QUFDSjtBQUNJZixZQUFNLENBQUNhLFNBQVAsR0FBbUJILE1BQU0sQ0FBQ0ksR0FBUCxDQUFXQyxFQUE5QjtBQUNBSixrQkFBWSxDQUFDLEVBQUQsQ0FBWjtBQVRKOztBQVdBLFNBQU8sSUFBUDtBQUNELENBZEQsRSIsImZpbGUiOiJjb250ZW50c2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IG9wdGlvbnNcblxuY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoJ29wdGlvbnMnLCBmdW5jdGlvbihkYXRhKSB7XG4gIG9wdGlvbnMgPSBkYXRhLm9wdGlvbnNcbn0pO1xuICBcblxuJChkb2N1bWVudCkuY2xpY2soZnVuY3Rpb24oZSkge1xuICB3aXRoT3B0aW9uc1NhdGlzZmllZChlLCBmdW5jdGlvbigpIHtcbiAgICBpZiAob3B0aW9ucy50cmFuc2xhdGVfYnkgIT0gJ2NsaWNrJylcblxuICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJykubGVuZ3RoID4gMCkgLy8gY2xvc2VkIHBhcmVudFxuICAgICAgcmV0dXJuXG5cbiAgICBwcm9jZXNzRXZlbnQoZSlcbiAgfSlcbiAgcmV0dXJuIHRydWVcbn0pXG5cbmZ1bmN0aW9uIHdpdGhPcHRpb25zU2F0aXNmaWVkKGUsIGRvX3N0dWZmKSB7XG4gICAgLy8gcHJlLWhvb2tcbiAgICBkb19zdHVmZigpXG59XG5cblxuLy90cmFuc2xhdGVcblxuZnVuY3Rpb24gcHJvY2Vzc0V2ZW50KGUpIHtcblxuICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKClcbiAgY29uc3QgaGl0X2VsZW0gPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGUuY2xpZW50WCwgZS5jbGllbnRZKVxuICBpZiAoIWhpdF9lbGVtKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBsZXQgd29yZCA9ICcnXG4gIGlmIChzZWxlY3Rpb24udG9TdHJpbmcoKSkge1xuICAgIGlmIChvcHRpb25zLnNlbGVjdGlvbl9rZXlfb25seSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IHNlbF9jb250YWluZXIgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKS5jb21tb25BbmNlc3RvckNvbnRhaW5lclxuICAgIFxuICAgIHdoaWxlIChzZWxfY29udGFpbmVyLm5vZGVUeXBlICE9IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICBzZWxfY29udGFpbmVyID0gc2VsX2NvbnRhaW5lci5wYXJlbnROb2RlXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgKCAkKGhpdF9lbGVtKS5pcyhzZWxfY29udGFpbmVyKSB8fCAkLmNvbnRhaW5zKHNlbF9jb250YWluZXIsIGhpdF9lbGVtKSApXG4gICAgICAgICYmIHNlbGVjdGlvbi5jb250YWluc05vZGUoaGl0X2VsZW0sIHRydWUpXG4gICAgKSB7XG4gICAgICB3b3JkID0gc2VsZWN0aW9uLnRvU3RyaW5nKClcbiAgICB9XG4gIFxuICAgIGlmICh3b3JkICE9ICcnKSB7XG4gICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7d29yZH0pXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShkYXRhKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge31cbiAgICBpZighZGF0YSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYoZGF0YS50eXBlID09PSAn6rSA66CoIOqygOyDieyWtCcpIHtcbiAgICAgIHJlc3VsdFsncmVjb21tYW5kcyddID0gZGF0YS5jb250ZW50Lm1hcCgob25lKT0+IG9uZS50aXRsZSlcbiAgICB9XG5cbiAgICBpZihkYXRhLnR5cGUgPT09ICfssL7snYAg64uo7Ja0Jykge1xuICAgICAgcmVzdWx0WydmaW5kJ10gPSBkYXRhLmNvbnRlbnRcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxufVxuXG5jaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoZnVuY3Rpb24ocmVxdWVzdCwgc2VuZGVyLCBzZW5kUmVzcG9uc2UpIHtcbiAgICBcbiAgc3dpdGNoIChyZXF1ZXN0LmhhbmRsZXIpIHtcbiAgY2FzZSAnZmluZCc6XG4gICAgICByZXN1bHQuaW5uZXJIVE1MID0gc2VuZGVyLnRhYi5pZFxuICAgICAgcmV0dXJuIHRydWVcbiAgY2FzZSAncmVjb21tYW5kJzpcbiAgICAgIHJlc3VsdC5pbm5lckhUTUwgPSBzZW5kZXIudGFiLmlkXG4gICAgICByZXR1cm4gdHJ1ZVxuICBkZWZhdWx0OlxuICAgICAgcmVzdWx0LmlubmVySFRNTCA9IHNlbmRlci50YWIuaWRcbiAgICAgIHNlbmRSZXNwb25zZSh7fSlcbiAgfVxuICByZXR1cm4gdHJ1ZVxufSlcblxuIl0sInNvdXJjZVJvb3QiOiIifQ==